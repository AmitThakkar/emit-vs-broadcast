<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Emit Vs Broadcast by AmitThakkar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Emit Vs Broadcast</h1>
      <h2 class="project-tagline">This repository is for exploring $emit and  $broadcast in AngularJS.</h2>
      <a href="https://github.com/AmitThakkar/emit-vs-broadcast" class="btn">View on GitHub</a>
      <a href="https://github.com/AmitThakkar/emit-vs-broadcast/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/AmitThakkar/emit-vs-broadcast/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="emit-vs-broadcast" class="anchor" href="#emit-vs-broadcast" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Emit vs Broadcast</h1>

<p>This repository is for exploring <strong>$emit</strong> and <strong>$broadcast</strong> in <strong>AngularJS</strong>.</p>

<p>Many a times, we need the <code>publisher/subscriber</code> functionality to achieve our requirement. And when we are working on <strong>AngularJS</strong>, then we write our <strong>AngularJS</strong> code in modular/component form and many of those components/modules are independent components/modules.</p>

<p>Now suppose, we want to access a value in multiple <strong>controllers</strong>, so to make that value accessible to all those <strong>controllers</strong>, we put that value in parent <strong>scope</strong>, and as I said before, <code>we write our AngularJS code in modular/component form and many of those components/modules are independent components/modules(e.g. isolated scope directive whose parent scope is only $rootScope)</code> then <strong>$rootScope</strong> is the only option left as common parent <strong>scope</strong> for all the controller/components. And if we store that value in <strong>$rootScope</strong> then all the <strong>controllers/components</strong> can read/update that value and if one <strong>controller/component</strong> updates <strong>$rootScope</strong> property then other <strong>component/controller</strong> will get updated value and dependent values will get updated as <strong>AngularJS</strong> <code>$digest</code> cycle will complete.</p>

<p>As we are adding the value in <strong>$rootScope</strong> so it will be accessible from whole <strong>AngularJS</strong> application which might be not good approach. Well, then where can we store data which is common among multiple controllers?</p>

<p>We have one more option to store the common data in <strong>AngularJS</strong>, that is <a href="https://amitthakkar.github.io/Providers-In-AngularJS/"><strong>Factory</strong>, <strong>Service</strong></a>. But if any of the <strong>controller/component</strong> updates any value, others will not get know that value has changed.</p>

<p>To counter this situation, <strong>AngularJS</strong> provides <strong>$on, $emit/$broadcast</strong> api methods to use <code>pub/sub</code> pattern. We can register <strong>subscribers</strong> with <strong>$on</strong> api <strong>function</strong> and publisher can <strong>publish</strong> messages with <strong>$emit/$broadcast</strong> api <strong>function</strong>.</p>

<blockquote>
<p>Now you would be thinking, why there are 2 api functions for publishing the message? $emit and $broadcast ?</p>
</blockquote>

<p><strong>$emit</strong>: When we <strong>emit</strong> a message then all the listeners/subscribes will be called which are registered on those <strong>scopes</strong> which are visible on parent element/node in DOM and on that <strong>scope</strong> which is used to <strong>emit</strong> the message.</p>

<p><strong>$broadcast</strong>: When we <strong>broadcast</strong> a message then all the listeners/subscribers will be called which are registered on those <strong>scopes</strong> which are visible on child element/node in DOM and on that <strong>scope</strong> which is used to <strong>broadcast</strong> the message.</p>

<p>Enough for theory, lets see how to bind listeners and how to <strong>broadcast/emit</strong> messages:</p>

<p>Binding a <strong>listener</strong> on event "EventFromAController":</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>, <span class="pl-smi">data</span>) {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(data, <span class="pl-s"><span class="pl-pds">"</span>In isolatedScopeDirective<span class="pl-pds">"</span></span>);
});</pre></div>

<p><strong>emitting</strong> a message on event "EventFromAController":</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">$scope</span>.<span class="pl-en">$emit</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EmitEventFromAController with $scope.$emit<span class="pl-pds">"</span></span>);</pre></div>

<p><strong>broadcasting</strong> a message on event "EventFromAController":</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">$scope</span>.<span class="pl-en">$broadcast</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EmitEventFromAController with $scope.$emit<span class="pl-pds">"</span></span>);</pre></div>

<p>Lets see a demo:</p>

<p><strong>emit-vs-broadcast.html</strong></p>

<div class="highlight highlight-text-html-basic"><pre>&lt;!DOCTYPE html&gt;
&lt;<span class="pl-ent">html</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>emitVSbroadcastApp<span class="pl-pds">"</span></span>&gt;
&lt;<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">title</span>&gt;Providers Test&lt;/<span class="pl-ent">title</span>&gt;
    <span class="pl-c">&lt;!-- Require AngularJS --&gt;</span>
<span class="pl-s1">    &lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>application/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>./js/angular.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
    <span class="pl-c">&lt;!-- Require providers-test JS --&gt;</span>
<span class="pl-s1">    &lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>application/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>./js/emitVSbroadcast.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
&lt;/<span class="pl-ent">head</span>&gt;
&lt;<span class="pl-ent">body</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>AParentController<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>AController<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">button</span> <span class="pl-e">ng-click</span>=<span class="pl-s"><span class="pl-pds">"</span>testEvent()<span class="pl-pds">"</span></span>&gt;Event Test&lt;/<span class="pl-ent">button</span>&gt;
        &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>AChildController<span class="pl-pds">"</span></span>&gt;
            &lt;<span class="pl-ent">div</span> <span class="pl-e">isolated-scope-directive2</span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
        &lt;/<span class="pl-ent">div</span>&gt;
    &lt;/<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">div</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>BController<span class="pl-pds">"</span></span>&gt;
    &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">isolated-scope-directive</span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p><strong>emitVSbroadcast.js</strong></p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * Created by Amit Thakkar on 11/02/15.</span>
<span class="pl-c"> */</span>
(<span class="pl-k">function</span> (<span class="pl-smi">ng</span>) {
    <span class="pl-k">var</span> emitVSbroadcastApp <span class="pl-k">=</span> <span class="pl-smi">ng</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">"</span>emitVSbroadcastApp<span class="pl-pds">"</span></span>, []);
    <span class="pl-smi">emitVSbroadcastApp</span>.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>AParentController<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$scope</span>) {
        <span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>, <span class="pl-smi">data</span>) {
            <span class="pl-en">console</span>.<span class="pl-c1">log</span>(data, <span class="pl-s"><span class="pl-pds">"</span>In AParentController<span class="pl-pds">"</span></span>);
        });
    });
    <span class="pl-smi">emitVSbroadcastApp</span>.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>AController<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$scope</span>, <span class="pl-smi">$rootScope</span>) {
        <span class="pl-smi">$scope</span>.<span class="pl-en">testEvent</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () {
            <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>$scope.$emit result:<span class="pl-pds">"</span></span>);
            <span class="pl-smi">$scope</span>.<span class="pl-en">$emit</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EmitEventFromAController with $scope.$emit<span class="pl-pds">"</span></span>);
            <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n\n\n</span>$scope.$broadcast result:<span class="pl-pds">"</span></span>);
            <span class="pl-smi">$scope</span>.<span class="pl-en">$broadcast</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">"</span>BroadcastEventFromAController with $scope.$broadcast<span class="pl-pds">"</span></span>);
            <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n\n\n</span>$rootScope.$emit result:<span class="pl-pds">"</span></span>);
            <span class="pl-smi">$rootScope</span>.<span class="pl-en">$emit</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EmitEventFromAController with $rootScope.$emit<span class="pl-pds">"</span></span>);
            <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n\n\n</span>$rootScope.$broadcast result:<span class="pl-pds">"</span></span>);
            <span class="pl-smi">$rootScope</span>.<span class="pl-en">$broadcast</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">"</span>BroadcastEventFromAController with $rootScope.$broadcast<span class="pl-pds">"</span></span>);
        };
        <span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>, <span class="pl-smi">data</span>) {
            <span class="pl-en">console</span>.<span class="pl-c1">log</span>(data, <span class="pl-s"><span class="pl-pds">"</span>In AController<span class="pl-pds">"</span></span>);
        });
    });
    <span class="pl-smi">emitVSbroadcastApp</span>.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>AChildController<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$scope</span>) {
        <span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>, <span class="pl-smi">data</span>) {
            <span class="pl-en">console</span>.<span class="pl-c1">log</span>(data, <span class="pl-s"><span class="pl-pds">"</span>In AChildController<span class="pl-pds">"</span></span>);
        });
    });
    <span class="pl-smi">emitVSbroadcastApp</span>.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>BController<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">$scope</span>) {
        <span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>, <span class="pl-smi">data</span>) {
            <span class="pl-en">console</span>.<span class="pl-c1">log</span>(data, <span class="pl-s"><span class="pl-pds">"</span>In BController<span class="pl-pds">"</span></span>);
        });
    });
    <span class="pl-smi">emitVSbroadcastApp</span>.<span class="pl-en">directive</span>(<span class="pl-s"><span class="pl-pds">"</span>isolatedScopeDirective<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> () {
        <span class="pl-k">return</span> {
            scope<span class="pl-k">:</span> {},
            <span class="pl-en">controller</span><span class="pl-k">:</span> <span class="pl-k">function</span> (<span class="pl-smi">$scope</span>) {
                <span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>, <span class="pl-smi">data</span>) {
                    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(data, <span class="pl-s"><span class="pl-pds">"</span>In isolatedScopeDirective<span class="pl-pds">"</span></span>);
                });
            }
        }
    });
    <span class="pl-smi">emitVSbroadcastApp</span>.<span class="pl-en">directive</span>(<span class="pl-s"><span class="pl-pds">"</span>isolatedScopeDirective2<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> () {
        <span class="pl-k">return</span> {
            scope<span class="pl-k">:</span> {},
            <span class="pl-en">controller</span><span class="pl-k">:</span> <span class="pl-k">function</span> (<span class="pl-smi">$scope</span>) {
                <span class="pl-smi">$scope</span>.<span class="pl-en">$on</span>(<span class="pl-s"><span class="pl-pds">'</span>EventFromAController<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>, <span class="pl-smi">data</span>) {
                    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(data, <span class="pl-s"><span class="pl-pds">"</span>In isolatedScopeDirective2<span class="pl-pds">"</span></span>);
                });
            }
        }
    });
}(angular));</pre></div>

<blockquote>
<p>You might be thinking that isolated scope directives get inherited by $rootScope only so if we broadcast a message with any other scope(which is not $rootScope and not that isolated scope) then those listeners will not called which are registered with isolated scope. Then you are wrong! You are missing a key point of this blog:</p>
</blockquote>

<p><strong>When we broadcast a message then all the listeners/subscribers will be called which are registered on those scopes which are visible on child element/node in DOM and on that scope which is used to broadcast the message.</strong></p>

<p>So if isolated scope directive is marked on child element/node of that <strong>scope</strong> then <strong>listeners</strong> of <strong>isolated scope</strong> will be called.</p>

<p><strong>How to run this Demo ??</strong> You can clone this working demo from <a href="https://github.com/AmitThakkar/emit-vs-broadcast">Github link</a>. And then open <strong>emit-vs-broadcast.html</strong> into your favourite browser.</p>

<p>You will notice we have 7 scope as shown here in diagram:</p>

<p><img src="https://raw.githubusercontent.com/AmitThakkar/emit-vs-broadcast/master/images/DOMScope.png" alt="DOMScope"></p>

<p>Few Things:</p>

<ol>
<li>If we <strong>broadcast</strong> any message with <strong>$rootScope</strong>, then all the <strong>subscribers/listeners</strong> will be called because all the HTML nodes are directly or indirectly children of <code>ng-app</code> node.</li>
<li>If we <strong>emit</strong> any message with <strong>$$rootScope</strong>, then only those <strong>subscribers/listeners</strong> will be called which are registered with <strong>$rootScope</strong> because there is no parent <strong>AngularJS</strong> node.</li>
<li>If we <strong>broadcast</strong> any message with <strong>"A Controller Scope"</strong>, then only those <strong>subscribers/listeners</strong> will be called which are registered with <strong>"A Controller Scope"</strong>, <strong>"A Child Controller Scope"</strong> and <strong>"isolated Scope directive 2"</strong>. Because <strong>"A Child Controller Scope"</strong> and <strong>"isolated Scope directive 2"</strong> are visible on child node of <strong>"A Controller Scope"</strong>.</li>
</ol>

<p>Now click on button <img src="https://raw.githubusercontent.com/AmitThakkar/emit-vs-broadcast/master/images/button.png" alt="Test Event"> in the browser, you will see output:</p>

<p><img src="https://raw.githubusercontent.com/AmitThakkar/emit-vs-broadcast/master/images/output.png" alt="Output"></p>

<p>In the output, you will notice that, when we are <strong>broadcast</strong>ing a message with <strong>$rootScope</strong> then all the registered <strong>subscribers/listeners</strong> are getting called and when we are <strong>emitting</strong> a message with <strong>$rootScope</strong>, then no <strong>subscriber/listener</strong> is getting called because there are no <strong>subscriber/listeners</strong> registered with <strong>$rootScope</strong>.</p>

<blockquote>
<p>Best Practice: Register subscribers/listeners with $rootScope and emit messages with $rootScope only so AngularJS does not have to traverse complete DOM tree to find all the listeners.</p>
</blockquote>

<h2>
<a id="follow-me" class="anchor" href="#follow-me" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Follow Me</h2>

<p><a href="https://github.com/AmitThakkar">Github</a></p>

<p><a href="https://twitter.com/amit_thakkar01">Twitter</a></p>

<p><a href="https://in.linkedin.com/in/amitthakkar01">LinkedIn</a></p>

<p><a href="http://amitthakkar.github.io/">More Blogs By Me</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/AmitThakkar/emit-vs-broadcast">Emit Vs Broadcast</a> is maintained by <a href="https://github.com/AmitThakkar">AmitThakkar</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
